-- INDEX : 조회를 빠르게 하는 인덱스

SELECT * FROM USER_INDEXES;

DROP TABLE EMP01;

CREATE TABLE EMP01 AS SELECT * FROM EMP; -- EMP 테이블과 내용만 같은 EMP01(제약조건 없음)
DESC EMP01;
SELECT * FROM EMP01; -- 14행

INSERT INTO EMP01 SELECT * FROM EMP01; -- 28행(1회) 56행(2회)

SELECT TO_CHAR(COUNT(*), '999,999,999') CNT FROM EMP01; -- 56행

INSERT INTO EMP01 SELECT * FROM EMP01; -- 11번실행(114,688개)

INSERT INTO EMP01(EMPNO, ENAME, DEPTNO) VALUES (1111, 'HONG', 40);
INSERT INTO EMP01 SELECT * FROM EMP01; -- 23만(1회), 45만(2회), 90만(3회)

SELECT TO_CHAR(COUNT(*), '999,999,999') CNT FROM EMP01; -- 917,512개

SELECT * FROM EMP01 
    WHERE ENAME='HONG'; -- INDEX 생성 전 조회 시간 : 0.13초

    -- 인덱스 생성 
CREATE INDEX IDX_EMP01_ENAME ON EMP01(ENAME); -- 0.382초

SELECT * FROM EMP01 
    WHERE ENAME='HONG'; -- INDEX 생성 후 조회 시간 : 0.001초


COMMIT;

INSERT INTO EMP01 SELECT * FROM EMP01; -- INDEX 생성 후  91만 -> 182만 : 19.57초

SELECT TO_CHAR(COUNT(*), '999,999,999') CNT FROM EMP01; -- 1,835,024개

ROLLBACK; -- 8.183초 (트리 재조정 시간)

DROP INDEX IDX_EMP01_ENAME;

INSERT INTO EMP01 SELECT * FROM EMP01; -- INDEX 제거 후 : 1.335초

DROP TABLE EMP01; -- 테이블 제거 시 인덱스도 자동 제거

SELECT * FROM USER_INDEXES;







